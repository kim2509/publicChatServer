<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tessoft.nearhere.taxi.admin">

	<select id="getAllPosts" parameterType="java.util.HashMap" resultType="com.nearhere.domain.Post">
		select * from post
	</select>

	<update id="updatePostDepartureDateTime" parameterType="com.nearhere.domain.Post">
		update post set departureDateTime=#{departureDateTime} where postID=#{postID}
	</update>
	
	<select id="getPostsNotYetFinished" resultType="com.nearhere.domain.Post">
		<![CDATA[
			select * from post 
			where status <> '종료됨'
			and deletedDate is null
			and type='taxi'
			order by postID desc
			limit 0, 50;
		]]> 	
	</select>
	
	<update id="updatePostAsFinished" parameterType="java.util.List" >
		update post set status='종료됨', finishedBySystem='Y'
		where postID in (
		<foreach item="Post" collection="list" open="" close=""
			separator=",">
			#{Post.postID}
		</foreach>
		)
	</update>
	
</mapper>